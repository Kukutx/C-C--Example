## 代码解释

### 解释下服务端的代码

- 服务端的代码，就是指运行在有摄像头的那个电脑的代码。
- **一开始的三行**都是导入头文件。（**如果你之前配置好了opencv这里就是没有问题的**）
- **第四行**，导入了一个`winsock`的包，这个包，是为了使用**网络通信技术**
- 之后，就是定义了几个常量（**IMG_WIDTH，IMG_HEIGHT，BUFFER_SIZE**）就是定义了几个数而已。
- `using namespace cv;` 是使用`opencv`的名空间（这个意思就是说，**使用什么作为关键字符**，比如，之前cout，这是个关键字，但是，这个的名空间是`std`）（**如果不理解也没太大关系的，老师一般答辩也不会问这个的**）
- 之后创建一个**结构体**，这个你可以参照**Python中的类的概念**。（如果你也没学过类的话，就把这个理解为**一个盒子（然后，我们在这个盒子里面放东西），以后定义新的元素的时候（像以前定义int，double之类的东西的时候，这里就直接定义一个）**）
- 所以说，在定义完的下面就有一行，写着`sentbuf data;`。
- 之后的话，就是写了一个函数的声明（定义放在了下面）。**原因这里要跟Python区别一下。** Python的话，函数放在一个文件里，那就是可以找到的，但是c++不一样，就是必须要在函数调用之前就有了才能调用的。
- 但是这样**写就会很丑**，所以我这里才会先写一个**函数声明**，最后再写**函数定义**。（**真的不是在你面前秀（捂脸）**）
- 进入到main函数（**注意到，有些时候我是写了参数的`int, char\**`。但是实际上，没区别的。。**）
- `VideoCapture`是一个摄像头类
- 然后，来确定一下，是否是打开的，如果是打开的，就是继续。
- Mat（**其实是一个矩阵**）在这里是为了存一个图（**这个矩阵不是二维的，其实是三维的，还多加了一堆东西的**）
- 之后的，**什么初始化DLL之类的**。没关系，反正我也记不住。
- 但是这个，都很简单的，大致流程copy一下就好了。**你们老师答辩也肯定不会问这个问题。**
- **重点在那个换ip地址的**（是的，我现在还没告诉你怎么看ip地址）
- `accept(servSock, (SOCKADDR*)&clntAddr, &nSize);` 函数，必须在，有其他ip地址来连接到这个上面之后，才会继续，否则，整个代码就会一直定在这。（**所以，后面输出了那个linked** 的时候，才表示连接成功了）
- 一直到`for(;;)`就是创建一个无限循环，一直在读取摄像头的图片，然后用那个函数给发出去。
- 最后的关闭什么的 都是套路，顺着来就好了。

### 解释下客户端的代码

- 就是那个看另外一个电脑摄像头信息的电脑运行的代码。
- 讲道理，前面都是基本一模一样的。
- 区别在于`std::cout << "connecting\n";`之后，使用的是`connect`函数，表示创立连接，并且，整个连接，就是通过`s`这个`SOCKET`来完成通信。
- 同样是，如果没连上就会一直停在这个，所以，后面输出的话，就会表示已经连上了。
- 然后`while (true)`同样是一种无限循环的表示方法一样。
- 还是通过，先读取一个图片，然后再展示出来。

### 图片和网络数据的转换工作

- 之前一直没讲这个，其实这个才是难点。
- 之前的结构体中，我们除了放了一个`char*`之外，我们还放了一个`int`作为标签。（**作用为：记录当前这个包是不是这个图片的最后一个包**）
- 做上面这样的处理的原因是，电脑发数据的时候，一次性不能发太大大数据，所以，就只能这样了。

#### 从Mat到数据包

- 每个图片分32个包来发出去。
- `img.ptr<uchar>(j + num1);`这个`()`内的数字，表示的是第多少行。（这里不妨假设为二维的，三维只是因为有彩色的（**三色光，你玩摄影，应该懂的**））
- `uchar`其实跟`char`也没太的区别，就是变成了没有符号的`char`而已。
- 本质上，就是通过Mat函数本身的`ptr`（这是个指针（**可以这么理解**）来定位到一个串，直接丢给字符串数组就好了。）
- `*3`表示的是有**三通道**。

反过来的操作是类似的。这里就做多描述了。

## 运行方法

- 一个电脑运行服务端代码（要求有摄像头）
- 一个电脑运行客户端代码（没有要求）
- 两台电脑在同一个局域网下（可以是连着同一个wifi的两台机器。（也可以是连着同一个路由器的两台电脑））